<template>
    <div class="body">
        <div class="tabSection">Tabsection</div>
        <div class="main">
            <template lwc:if={webViewLink}>
                <iframe src={webViewLink}></iframe>
            </template>
            <div class="fieldMappingContainer">
                fieldMappingContainer
            </div>
        </div>


        <template if:true={showPopup}>
            <div class="section">
                <div class="main">
                    <div class="firstRow">
                        <div class="title">Select Google Doc</div>
                        <div class="profile">
                            <div class="userData">
                                <div class="username">{profile.username} </div>
                                <div class="email">{profile.email}</div>
                            </div>
                            <svg xmlns="http://www.w3.org/2000/svg" class="profileIcon" viewBox="0 0 32 32" fill="none">
                                <rect width="32" height="32" rx="16" fill="#00AEFF"/>
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M23 20.9584V21.6C23 22.3584 22.3583 23 21.6 23H10.4C9.64167 23 9 22.3584 9 21.6V20.9584C9 19.2667 10.9833 18.2167 12.85 17.4L13.025 17.3125C13.1708 17.2542 13.3167 17.2542 13.4625 17.3417C14.2208 17.8375 15.0667 18.1 15.9708 18.1C16.875 18.1 17.75 17.8084 18.4792 17.3417C18.625 17.2542 18.7708 17.2542 18.9167 17.3125L19.0917 17.4C21.0167 18.2167 23 19.2375 23 20.9584ZM16.0001 9C17.9251 9 19.4709 10.7208 19.4709 12.85C19.4709 14.9792 17.9251 16.7 16.0001 16.7C14.0751 16.7 12.5293 14.9792 12.5293 12.85C12.5293 10.7208 14.0751 9 16.0001 9Z" fill="white"/>
                            </svg>
                        </div>
                    </div>
                    <div class="secondRow">
                        <div class="search">
                            <svg xmlns="http://www.w3.org/2000/svg" class="searchIcon" viewBox="0 0 24 24" fill="none">
                                <path d="M11 19C15.4183 19 19 15.4183 19 11C19 6.58172 15.4183 3 11 3C6.58172 3 3 6.58172 3 11C3 15.4183 6.58172 19 11 19Z" stroke="#ABB7C2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M21 21L16.7 16.7" stroke="#ABB7C2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <input value={serachString} onkeyup={handleSearch}  placeholder="Search..." >
                        </div>
                        <div class="refresh-div">
                            <svg xmlns="http://www.w3.org/2000/svg" class="refresh" onclick={refreshDocs} viewBox="0 0 87 24" fill="none">
                                <path d="M3.08826 7.49303H5.02575C5.20258 7.49303 5.37216 7.56325 5.4972 7.68825C5.62223 7.81326 5.69247 7.98279 5.69247 8.15957C5.69247 8.33635 5.62223 8.50589 5.4972 8.63089C5.37216 8.75589 5.20258 8.82611 5.02575 8.82611H1.91883C1.742 8.82611 1.57242 8.75589 1.44738 8.63089C1.32235 8.50589 1.2521 8.33635 1.2521 8.15957V5.05616C1.2521 4.87938 1.32235 4.70984 1.44738 4.58484C1.57242 4.45984 1.742 4.38962 1.91883 4.38962C2.09565 4.38962 2.26524 4.45984 2.39027 4.58484C2.5153 4.70984 2.58555 4.87938 2.58555 5.05616V6.10929C3.72968 5.05809 5.15525 4.36274 6.68816 4.10815C8.22106 3.85355 9.79495 4.05075 11.2176 4.67564C12.6403 5.30053 13.8501 6.32608 14.6994 7.62703C15.5486 8.92798 16.0006 10.448 16 12.0015C16 14.1226 15.1573 16.1569 13.6571 17.6568C12.157 19.1568 10.1223 19.9996 8.00067 20C5.87876 20 3.84376 19.1573 2.34334 17.6573C0.842925 16.1573 0 14.1228 0 12.0015H1.33344C1.33344 13.7693 2.03588 15.4647 3.28623 16.7147C4.53658 17.9647 6.23241 18.6669 8.00067 18.6669C9.76892 18.6669 11.4648 17.9647 12.7151 16.7147C13.9655 15.4647 14.6679 13.7693 14.6679 12.0015C14.668 10.659 14.2625 9.34769 13.5047 8.23937C12.7468 7.13106 11.6718 6.27738 10.4205 5.79012C9.16911 5.30286 7.79976 5.20473 6.49169 5.50859C5.18363 5.81244 3.99784 6.50411 3.08959 7.49303H3.08826Z" fill="black"/>
                                <path d="M33.351 18L30.791 13.552H29.399V18H27.575V6.88H31.415C32.2683 6.88 32.9883 7.02933 33.575 7.328C34.1723 7.62667 34.615 8.02667 34.903 8.528C35.2017 9.02933 35.351 9.58933 35.351 10.208C35.351 10.9333 35.1377 11.5947 34.711 12.192C34.295 12.7787 33.6497 13.1787 32.775 13.392L35.527 18H33.351ZM29.399 12.096H31.415C32.0977 12.096 32.6097 11.9253 32.951 11.584C33.303 11.2427 33.479 10.784 33.479 10.208C33.479 9.632 33.3083 9.184 32.967 8.864C32.6257 8.53333 32.1083 8.368 31.415 8.368H29.399V12.096ZM45.7644 13.376C45.7644 13.7067 45.743 14.0053 45.7004 14.272H38.9644C39.0177 14.976 39.279 15.5413 39.7484 15.968C40.2177 16.3947 40.7937 16.608 41.4764 16.608C42.4577 16.608 43.151 16.1973 43.5564 15.376H45.5244C45.2577 16.1867 44.7724 16.8533 44.0684 17.376C43.375 17.888 42.511 18.144 41.4764 18.144C40.6337 18.144 39.8764 17.9573 39.2044 17.584C38.543 17.2 38.0204 16.6667 37.6364 15.984C37.263 15.2907 37.0764 14.4907 37.0764 13.584C37.0764 12.6773 37.2577 11.8827 37.6204 11.2C37.9937 10.5067 38.511 9.97333 39.1724 9.6C39.8444 9.22667 40.6124 9.04 41.4764 9.04C42.3084 9.04 43.0497 9.22133 43.7004 9.584C44.351 9.94667 44.8577 10.4587 45.2204 11.12C45.583 11.7707 45.7644 12.5227 45.7644 13.376ZM43.8604 12.8C43.8497 12.128 43.6097 11.5893 43.1404 11.184C42.671 10.7787 42.0897 10.576 41.3964 10.576C40.767 10.576 40.2284 10.7787 39.7804 11.184C39.3324 11.5787 39.0657 12.1173 38.9804 12.8H43.8604ZM51.2554 10.672H49.6234V18H47.7834V10.672H46.7434V9.184H47.7834V8.56C47.7834 7.54667 48.05 6.81067 48.5834 6.352C49.1274 5.88267 49.9754 5.648 51.1274 5.648V7.168C50.5727 7.168 50.1834 7.27467 49.9594 7.488C49.7354 7.69067 49.6234 8.048 49.6234 8.56V9.184H51.2554V10.672ZM54.6959 10.464C54.9625 10.016 55.3145 9.66933 55.7519 9.424C56.1999 9.168 56.7279 9.04 57.3359 9.04V10.928H56.8719C56.1572 10.928 55.6132 11.1093 55.2399 11.472C54.8772 11.8347 54.6959 12.464 54.6959 13.36V18H52.8719V9.184H54.6959V10.464ZM67.0925 13.376C67.0925 13.7067 67.0712 14.0053 67.0285 14.272H60.2925C60.3458 14.976 60.6072 15.5413 61.0765 15.968C61.5458 16.3947 62.1218 16.608 62.8045 16.608C63.7858 16.608 64.4792 16.1973 64.8845 15.376H66.8525C66.5858 16.1867 66.1005 16.8533 65.3965 17.376C64.7032 17.888 63.8392 18.144 62.8045 18.144C61.9618 18.144 61.2045 17.9573 60.5325 17.584C59.8712 17.2 59.3485 16.6667 58.9645 15.984C58.5912 15.2907 58.4045 14.4907 58.4045 13.584C58.4045 12.6773 58.5858 11.8827 58.9485 11.2C59.3218 10.5067 59.8392 9.97333 60.5005 9.6C61.1725 9.22667 61.9405 9.04 62.8045 9.04C63.6365 9.04 64.3778 9.22133 65.0285 9.584C65.6792 9.94667 66.1858 10.4587 66.5485 11.12C66.9112 11.7707 67.0925 12.5227 67.0925 13.376ZM65.1885 12.8C65.1778 12.128 64.9378 11.5893 64.4685 11.184C63.9992 10.7787 63.4178 10.576 62.7245 10.576C62.0952 10.576 61.5565 10.7787 61.1085 11.184C60.6605 11.5787 60.3938 12.1173 60.3085 12.8H65.1885ZM72.0875 18.144C71.3942 18.144 70.7702 18.0213 70.2155 17.776C69.6715 17.52 69.2395 17.1787 68.9195 16.752C68.5995 16.3147 68.4288 15.8293 68.4075 15.296H70.2955C70.3275 15.6693 70.5035 15.984 70.8235 16.24C71.1542 16.4853 71.5648 16.608 72.0555 16.608C72.5675 16.608 72.9622 16.512 73.2395 16.32C73.5275 16.1173 73.6715 15.8613 73.6715 15.552C73.6715 15.2213 73.5115 14.976 73.1915 14.816C72.8822 14.656 72.3862 14.48 71.7035 14.288C71.0422 14.1067 70.5035 13.9307 70.0875 13.76C69.6715 13.5893 69.3088 13.328 68.9995 12.976C68.7008 12.624 68.5515 12.16 68.5515 11.584C68.5515 11.1147 68.6902 10.688 68.9675 10.304C69.2448 9.90933 69.6395 9.6 70.1515 9.376C70.6742 9.152 71.2715 9.04 71.9435 9.04C72.9462 9.04 73.7515 9.296 74.3595 9.808C74.9782 10.3093 75.3088 10.9973 75.3515 11.872H73.5275C73.4955 11.4773 73.3355 11.1627 73.0475 10.928C72.7595 10.6933 72.3702 10.576 71.8795 10.576C71.3995 10.576 71.0315 10.6667 70.7755 10.848C70.5195 11.0293 70.3915 11.2693 70.3915 11.568C70.3915 11.8027 70.4768 12 70.6475 12.16C70.8182 12.32 71.0262 12.448 71.2715 12.544C71.5168 12.6293 71.8795 12.7413 72.3595 12.88C72.9995 13.0507 73.5222 13.2267 73.9275 13.408C74.3435 13.5787 74.7008 13.8347 74.9995 14.176C75.2982 14.5173 75.4528 14.9707 75.4635 15.536C75.4635 16.0373 75.3248 16.4853 75.0475 16.88C74.7702 17.2747 74.3755 17.584 73.8635 17.808C73.3622 18.032 72.7702 18.144 72.0875 18.144ZM81.9944 9.04C82.6664 9.04 83.2637 9.184 83.7864 9.472C84.3197 9.76 84.7357 10.1867 85.0344 10.752C85.3437 11.3173 85.4984 12 85.4984 12.8V18H83.6904V13.072C83.6904 12.2827 83.493 11.68 83.0984 11.264C82.7037 10.8373 82.165 10.624 81.4824 10.624C80.7997 10.624 80.2557 10.8373 79.8504 11.264C79.4557 11.68 79.2584 12.2827 79.2584 13.072V18H77.4344V6.16H79.2584V10.208C79.5677 9.83467 79.957 9.54667 80.4264 9.344C80.9064 9.14133 81.429 9.04 81.9944 9.04Z" fill="#151414"/>
                            </svg>
                        </div>
                        
                        
                    </div>

                
                    <div class="documents">
                        <template for:each={templates} for:item="template">
                            <div class="docs-container" key={template.id} data-id={template.id} onclick={handleTemplateClick}>
                                <div class="docFirstRow">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 38 51" fill="none" class="small">
                                        <path d="M3.5625 0C1.59499 0 0 1.55683 0 3.47727V47.5227C0 49.4432 1.59499 51 3.5625 51H34.4375C36.405 51 38 49.4432 38 47.5227V13.9091L23.75 0H3.5625Z" fill="#4E8DF5"/>
                                        <path d="M3.5625 51.0001C1.59499 51.0001 0 49.4433 0 47.5228V46.9433C0 48.8637 1.59499 50.4206 3.5625 50.4206H34.4375C36.405 50.4206 38 48.8637 38 46.9433V47.5228C38 49.4433 36.405 51.0001 34.4375 51.0001H3.5625Z" fill="#417EE9"/>
                                        <path d="M3.5625 0C1.59499 0 0 1.55683 0 3.47727V4.05682C0 2.13637 1.59499 0.579545 3.5625 0.579545H24.3438L23.75 0H3.5625Z" fill="#639AF6"/>
                                        <path d="M38.0001 25.7899V13.9092L35.9219 11.8808H25.9002C25.1068 11.8808 24.7094 12.8172 25.2705 13.3648L38.0001 25.7899Z" fill="url(#paint0_linear_1450_51)"/>
                                        <path d="M23.75 0L38 13.9091H27.3125C25.345 13.9091 23.75 12.3523 23.75 10.4318V0Z" fill="#A6C5FA"/>
                                        <path d="M28.5 25.5H9.5V27.8182H28.5V25.5Z" fill="white"/>
                                        <path d="M28.5 30.1364H9.5V32.4545H28.5V30.1364Z" fill="white"/>
                                        <path d="M9.5 34.7727H28.5V37.0909H9.5V34.7727Z" fill="white"/>
                                        <path d="M23.75 39.4091H9.5V41.7273H23.75V39.4091Z" fill="white"/>
                                        <defs>
                                        <linearGradient id="paint0_linear_1450_51" x1="30.8751" y1="25.7899" x2="30.8751" y2="11.591" gradientUnits="userSpaceOnUse">
                                        <stop stop-color="#4E8DF5"/>
                                        <stop offset="1" stop-color="#3D6ACD"/>
                                        </linearGradient>
                                        </defs>
                                    </svg>
                                    <div class="docName">{template.name}</div>
                                </div>
                                <div class="docSecondRow">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 38 51" fill="none" class="big">
                                        <path
                                            d="M3.5625 0C1.59499 0 0 1.55683 0 3.47727V47.5227C0 49.4432 1.59499 51 3.5625 51H34.4375C36.405 51 38 49.4432 38 47.5227V13.9091L23.75 0H3.5625Z"
                                            fill="#4E8DF5" />
                                        <path
                                            d="M3.5625 51.0001C1.59499 51.0001 0 49.4433 0 47.5228V46.9433C0 48.8637 1.59499 50.4206 3.5625 50.4206H34.4375C36.405 50.4206 38 48.8637 38 46.9433V47.5228C38 49.4433 36.405 51.0001 34.4375 51.0001H3.5625Z"
                                            fill="#417EE9" />
                                        <path
                                            d="M3.5625 0C1.59499 0 0 1.55683 0 3.47727V4.05682C0 2.13637 1.59499 0.579545 3.5625 0.579545H24.3438L23.75 0H3.5625Z"
                                            fill="#639AF6" />
                                        <path
                                            d="M38.0001 25.7899V13.9092L35.9219 11.8808H25.9002C25.1068 11.8808 24.7094 12.8172 25.2705 13.3648L38.0001 25.7899Z"
                                            fill="url(#paint0_linear_1450_51)" />
                                        <path d="M23.75 0L38 13.9091H27.3125C25.345 13.9091 23.75 12.3523 23.75 10.4318V0Z" fill="#A6C5FA" />
                                        <path d="M28.5 25.5H9.5V27.8182H28.5V25.5Z" fill="white" />
                                        <path d="M28.5 30.1364H9.5V32.4545H28.5V30.1364Z" fill="white" />
                                        <path d="M9.5 34.7727H28.5V37.0909H9.5V34.7727Z" fill="white" />
                                        <path d="M23.75 39.4091H9.5V41.7273H23.75V39.4091Z" fill="white" />
                                        <defs>
                                            <linearGradient x1="30.8751" y1="25.7899" x2="30.8751" y2="11.591" gradientUnits="userSpaceOnUse">
                                                <stop stop-color="#4E8DF5" />
                                                <stop offset="1" stop-color="#3D6ACD" />
                                            </linearGradient>
                                        </defs>
                                    </svg>
                                </div>
                                <div class="docThirdRow">
                                    <div class="size">{template.size}</div>
                                    <div class="date">Date: {template.createdTime}</div>
                                </div>
                            </div>
                        </template>
                        
                    </div>
                    <div class="footer">
                        <div class="button cancel" onclick={closePopup}>Cancel</div>
                        <div class="button next" onclick={next}>Next</div>
                    </div> 
                </div>
            </div>
        </template>

        
        <template lwc:if={isSpinner}>
            <c-document-loader></c-document-loader>
        </template>
    </div>
</template>